(function(t){function e(e){for(var a,r,c=e[0],s=e[1],u=e[2],l=0,d=[];l<c.length;l++)r=c[l],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&d.push(i[r][0]),i[r]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a]);f&&f(e);while(d.length)d.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],a=!0,r=1;r<n.length;r++){var c=n[r];0!==i[c]&&(a=!1)}a&&(o.splice(e--,1),t=s(s.s=n[0]))}return t}var a={},r={app:0},i={app:0},o=[];function c(t){return s.p+"js/"+({}[t]||t)+"."+{"chunk-005835ca":"2e21d74a","chunk-012e3a80":"b07ad6d6","chunk-02e8e6b4":"b1f608a8","chunk-03aec080":"3a6c554e","chunk-0be5b710":"8aeb4198","chunk-1304931a":"4f6bbf93","chunk-267a2730":"71a985f6","chunk-29b6a6ac":"5e3bcb74","chunk-33bfcd15":"6d97298e","chunk-36978d10":"7359ea1b","chunk-3ca0d8f6":"26076905","chunk-63f4f6f0":"1d70467e","chunk-7755b2b8":"be25b906","chunk-958ac49e":"4477c60e","chunk-99a0258a":"f9fc6208"}[t]+".js"}function s(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(t){var e=[],n={"chunk-005835ca":1,"chunk-012e3a80":1,"chunk-02e8e6b4":1,"chunk-03aec080":1,"chunk-0be5b710":1,"chunk-1304931a":1,"chunk-267a2730":1,"chunk-29b6a6ac":1,"chunk-33bfcd15":1,"chunk-36978d10":1,"chunk-3ca0d8f6":1,"chunk-63f4f6f0":1,"chunk-7755b2b8":1,"chunk-958ac49e":1,"chunk-99a0258a":1};r[t]?e.push(r[t]):0!==r[t]&&n[t]&&e.push(r[t]=new Promise((function(e,n){for(var a="css/"+({}[t]||t)+"."+{"chunk-005835ca":"ed16a8b4","chunk-012e3a80":"eaf33ca4","chunk-02e8e6b4":"e1cf998e","chunk-03aec080":"ba630a1e","chunk-0be5b710":"eb1368fc","chunk-1304931a":"100c85eb","chunk-267a2730":"ae0fc1f9","chunk-29b6a6ac":"1fbfc48f","chunk-33bfcd15":"7ef3327a","chunk-36978d10":"f8fa61a5","chunk-3ca0d8f6":"f9495cc8","chunk-63f4f6f0":"f1a84639","chunk-7755b2b8":"a7b729c5","chunk-958ac49e":"18a3742f","chunk-99a0258a":"750cf8b3"}[t]+".css",i=s.p+a,o=document.getElementsByTagName("link"),c=0;c<o.length;c++){var u=o[c],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===a||l===i))return e()}var d=document.getElementsByTagName("style");for(c=0;c<d.length;c++){u=d[c],l=u.getAttribute("data-href");if(l===a||l===i)return e()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=e,f.onerror=function(e){var a=e&&e.target&&e.target.src||i,o=new Error("Loading CSS chunk "+t+" failed.\n("+a+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=a,delete r[t],f.parentNode.removeChild(f),n(o)},f.href=i;var h=document.getElementsByTagName("head")[0];h.appendChild(f)})).then((function(){r[t]=0})));var a=i[t];if(0!==a)if(a)e.push(a[2]);else{var o=new Promise((function(e,n){a=i[t]=[e,n]}));e.push(a[2]=o);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=c(t);var d=new Error;u=function(e){l.onerror=l.onload=null,clearTimeout(f);var n=i[t];if(0!==n){if(n){var a=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+a+": "+r+")",d.name="ChunkLoadError",d.type=a,d.request=r,n[1](d)}i[t]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(e)},s.m=t,s.c=a,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(n,a,function(e){return t[e]}.bind(null,a));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=e,u=u.slice();for(var d=0;d<u.length;d++)e(u[d]);var f=l;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0311":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tabbar"},t._l(t.tabbarData,(function(e,a){return n("router-link",{key:a,staticClass:"tab-item",attrs:{to:e.path,"active-class":"is-selected"}},[n("div",{staticClass:"tab-item-icon"},[n("i",{class:"fa fa-"+e.icon})]),n("div",{staticClass:"tab-item-label"},[t._v(t._s(e.title))])])})),1)},r=[],i={data:function(){return{tabbarData:[{title:"首页",icon:"home",path:"/index"},{title:"订单",icon:"file-text-o",path:"/order"},{title:"我的",icon:"user",path:"/me"}]}}},o=i,c=(n("f332"),n("9ca4")),s=Object(c["a"])(o,a,r,!1,null,"1ebf4b3c",null);e["a"]=s.exports},"034f":function(t,e,n){"use strict";var a=n("8589"),r=n.n(a);r.a},"1f7a":function(t,e,n){},"54cc":function(t,e,n){"use strict";var a=n("9e5c"),r=n.n(a);r.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e18c"),n("a133"),n("ed0d"),n("f09c"),n("e117");var a=n("a593"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("keep-alive",[n("router-view")],1)],1)},i=[],o=(n("e35a"),n("0d7a"),{methods:{getLocation:function(){var t=this;AMap.plugin("AMap.Geolocation",(function(){var e=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,zoomToAccuracy:!0});function n(e){t.$store.dispatch("setLocation",e),t.$store.dispatch("setAddress",e.formattedAddress)}function a(e){console.log(e),t.getLngLatLocation()}e.getCurrentPosition(),AMap.event.addListener(e,"complete",n),AMap.event.addListener(e,"error",a)}))},getLngLatLocation:function(){var t=this;AMap.plugin("AMap.CitySearch",(function(){var e=new AMap.CitySearch;e.getLocalCity((function(e,n){"complete"===e&&"OK"===n.info&&(console.log(n),AMap.plugin("AMap.Geocoder",(function(){var e=new AMap.Geocoder({city:n.adcode}),a=n.rectangle.split(";")[0].split(",");e.getAddress(a,(function(e,a){"complete"===e&&"OK"===a.info&&(console.log(a),t.$store.dispatch("setLocation",{addressComponent:{city:n.city,province:n.province},formattedAddress:a.regeocode.formattedAddress}),t.$store.dispatch("setAddress",a.regeocode.formattedAddress))}))})))}))}))}},created:function(){this.getLocation()}}),c=o,s=(n("034f"),n("9ca4")),u=Object(s["a"])(c,r,i,!1,null,null,null),l=u.exports,d=n("4fb5"),f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("router-view")],1)},h=[],p={components:{},methods:{}},m=p,b=(n("f985"),Object(s["a"])(m,f,h,!1,null,"709a6adc",null)),v=b.exports,_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"index"},[n("div",{staticClass:"header"},[n("div",{staticClass:"address_map",on:{click:function(e){return t.$router.push({name:"address",params:{city:t.city}})}}},[n("i",{staticClass:"fa fa-map-marker"}),n("span",[t._v(t._s(t.address))]),n("i",{staticClass:"fa fa-sort-desc"})])]),n("div",{staticClass:"search_wrap",class:{fixedview:t.fixedviewShow}},[n("div",{staticClass:"shop_search",on:{click:function(e){return t.$router.push("/search")}}},[n("i",{staticClass:"fa fa-search"}),t._v(" 搜索商家 商家名称 ")])]),n("mt-swipe",{staticClass:"swiper",attrs:{auto:4e3}},t._l(t.datalist,(function(t,e){return n("mt-swipe-item",{key:e},[n("img",{attrs:{src:t}})])})),1),n("mt-swipe",{staticClass:"entries",attrs:{auto:0}},[n("mt-swipe-item",t._l(t.entries,(function(e,a){return n("div",{key:a,staticClass:"foodentry"},[n("div",{staticClass:"img_wrap"},[n("img",{attrs:{src:e.icon,alt:"",srcset:""}})]),n("span",[t._v(t._s(e.name))])])})),0)],1),n("div",{staticClass:"shoplist-title"},[t._v("推荐商家")]),n("FilterView",{attrs:{filterData:t.filterData},on:{searchFixed:t.searchFixed,update:t.update}}),n("mt-loadmore",{ref:"loadmore",attrs:{"top-method":t.loadData,"bottom-method":t.loadMore,autoFill:!1,"bottom-all-loaded":t.allLoaded,bottomPullText:t.bottomPullText}},[n("ul",[n("div",{staticClass:"shoplist"},t._l(t.restaurants,(function(t,e){return n("IndexShop",{key:e,attrs:{restaurant:t.restaurant}})})),1)])]),n("TabBar")],1)},k=[],g=(n("b4fb"),n("fe59"),n("08ba"),n("af86"),n("0311")),y=n("660a"),C=n.n(y),w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"index-container",on:{click:function(e){return t.$router.push("/shop")}}},[n("section",{staticClass:"index-shopInfo"},[n("div",{staticClass:"logo_container"},[n("img",{attrs:{src:t.restaurant.image_path,alt:""}})]),n("div",{staticClass:"index_main"},[n("div",{staticClass:"index_shopname"},[n("i",{staticClass:"restaurant.is_premium"},[t._v("品牌")]),n("span",[t._v(t._s(t.restaurant.name))])]),n("div",{staticClass:"index-rateWrap"},[t._m(0),n("span",{staticClass:"rate"},[t._v(t._s(t.restaurant.rating))]),n("span",[t._v("月售"+t._s(t.restaurant.recent_order_num)+"单")]),t.restaurant.delivery_mode?n("div",{staticClass:"delivery"},[n("span",{staticClass:"icon-hollow"},[t._v(t._s(t.restaurant.delivery_mode.text))])]):t._e()]),n("div",{staticClass:"index-moneylimit"},[n("span",[t._v("￥"+t._s(t.restaurant.float_delivery_fee)+"起送")]),n("span",[t._v("配送费"+t._s(t.restaurant.delivery_fee_discount))]),n("div",{staticClass:"index-distanceWrap"},[n("span",[t._v("1Km | ")]),n("span",[t._v(t._s(t.restaurant.order_lead_time)+"分钟")])])])])])])},x=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"Rating-gray"},[n("i",{staticClass:"fa fa-star"}),n("i",{staticClass:"fa fa-star"}),n("i",{staticClass:"fa fa-star"}),n("i",{staticClass:"fa fa-star"}),n("i",{staticClass:"fa fa-star"})])}],O={props:["restaurant"],created:function(){}},S=O,E=(n("68cd"),Object(s["a"])(S,w,x,!1,null,"599506b6",null)),I=E.exports,A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"FilterView",class:{View:t.isView},on:{click:function(e){return e.target!==e.currentTarget?null:t.hiedView(e)}}},[t.filterData?n("div",{staticClass:"filter_wrap"},[n("aside",{staticClass:"filter"},t._l(t.filterData.navTab,(function(e,a){return n("div",{key:a,staticClass:"filter-nav",class:{"filter-bold":t.currentFilter===a},on:{click:function(e){return t.filterSort(a)}}},[n("span",[t._v(" "+t._s(e.name))]),e.icon?n("i",{staticClass:"'fa fa-' item.icon"}):t._e()])})),0)]):t._e(),t.isView?n("div",{staticClass:"filter-extend"},[n("ul",t._l(t.filterData.sortBy,(function(e,a){return n("li",{key:a,class:{selectName:t.currentSelect===a},on:{click:function(n){return t.selected(e,a)}}},[n("span",[t._v(t._s(e.name))]),n("i",{directives:[{name:"show",rawName:"v-show",value:t.currentSelect===a,expression:"currentSelect === i"}],staticClass:"fa fa-check"})])})),0)]):t._e()])},T=[],L=(n("053b"),{data:function(){return{currentFilter:0,isView:!1,currentSelect:0}},methods:{filterSort:function(t){switch(this.currentFilter=t,t){case 0:this.isView=!0,this.$emit("searchFixed",!0);break;default:this.hiedView();break}},hiedView:function(){this.isView=!1,this.$emit("searchFixed",!1)},selected:function(t,e){this.currentSelect=e,this.filterData.navTab[0].name=this.filterData.sortBy[e].name,this.hiedView(),this.$emit("update",{condation:t.code})}},props:["filterData"],created:function(){}}),D=L,$=(n("54cc"),Object(s["a"])(D,A,T,!1,null,"1cea0fae",null)),R=$.exports,F={data:function(){return{datalist:[],entries:[],isSort:!1,fixedviewShow:!1,page:1,size:5,allLoaded:!1,bottomPullText:"上拉刷新",restaurants:[],filterData:{navTab:[{name:"综合排序"},{name:"距离最近"},{name:"品质联盟"},{name:"筛选"}],sortBy:[{name:"综合排序"},{name:"综好评优先",code:"rating"},{name:"钥量最高"},{name:"起送价最低",code:"react_orderBy_number"},{name:"配送最快"},{name:"配送费最低",code:"rating"},{name:"人均从低到高"},{name:"人均从高到低",code:"rating"},{name:"通用排序"}],screenBy:[{title:"商家服务(可多选)",id:"mpv",data:{name:"蜂鸟专送",select:!1,code:""}},{title:"优惠活动(可多选)",id:"offer",data:{name:"首单立减",select:!1,code:""}},{title:"人均消费(单选)",id:"per",data:{name:"20元以下",select:!1,code:""}}]}}},components:{FilterView:R,IndexShop:I,TabBar:g["a"]},computed:{address:function(){return this.$store.getters.address},city:function(){return this.$store.getters.location.addressComponent.city||this.$store.getters.location.addressComponent.province}},created:function(){this.getData()},methods:{getData:function(){var t=this;this.$axios.get("/api/profile/shopping").then((function(e){var n=e.data;t.datalist=n.swipeImgs})),this.$axios.get("https://www.fastmock.site/mock/ae3a2c74c182f166d86cab7a2466dca7/foodlist/api/food").then((function(e){var n=e.data;t.entries=n.data.kingkongList})),this.loadData()},loadData:function(){var t=this;this.page=1,this.allLoaded=!1,this.bottomPullText="上拉加载更多",this.$axios.post("/api/profile/restaurants/".concat(this.page,"/").concat(this.size)).then((function(e){var n=e.data;t.restaurants=n,t.$refs.loadmore.onTopLoaded()}))},loadMore:function(){var t=this;this.allLoaded||(this.page++,this.$axios.post("/api/profile/restaurants/".concat(this.page,"/").concat(this.size)).then((function(e){var n=e.data;t.$refs.loadmore.onBottomLoaded(),n.length>0?(n.forEach((function(e){t.restaurants.push(e)})),n<t.size&&(t.allLoaded=!0,t.bottomPullText="没有更多了哦")):(t.allLoaded=!0,t.bottomPullText="没有更多了哦")})))},searchFixed:function(t){this.fixedviewShow=t},update:function(t){console.log(t)}}},j=F,N=(n("c8de"),Object(s["a"])(j,_,k,!1,null,"39d4e5be",null)),M=N.exports;a["default"].use(d["a"]);var P=[{path:"/",component:v,children:[{path:"",redirect:"/index"},{path:"/index",component:M},{path:"/order",component:function(){return n.e("chunk-36978d10").then(n.bind(null,"cf2a"))}},{path:"/me",component:function(){return n.e("chunk-7755b2b8").then(n.bind(null,"0a99"))}},{path:"/address",name:"address",component:function(){return n.e("chunk-005835ca").then(n.bind(null,"a821"))}},{path:"/myaddress",name:"myaddress",component:function(){return n.e("chunk-63f4f6f0").then(n.bind(null,"50bd"))}},{path:"/addaddress",name:"addaddress",component:function(){return n.e("chunk-267a2730").then(n.bind(null,"bf28"))}},{path:"/settlement",name:"settlement",component:function(){return n.e("chunk-03aec080").then(n.bind(null,"13a8"))}},{path:"/remark",name:"remark",component:function(){return n.e("chunk-0be5b710").then(n.bind(null,"67bc"))}},{path:"/pay",name:"pay",component:function(){return n.e("chunk-012e3a80").then(n.bind(null,"a794"))}},{path:"/city",name:"city",component:function(){return n.e("chunk-958ac49e").then(n.bind(null,"0d5f"))}},{path:"/search",name:"search",component:function(){return n.e("chunk-99a0258a").then(n.bind(null,"2d3b"))}},{path:"/shop",redirect:"/goods",name:"shop",component:function(){return n.e("chunk-33bfcd15").then(n.bind(null,"5f6f"))},children:[{path:"/goods",component:function(){return n.e("chunk-3ca0d8f6").then(n.bind(null,"1e08"))}},{path:"/comments",component:function(){return n.e("chunk-02e8e6b4").then(n.bind(null,"afd4"))}},{path:"/seller",component:function(){return n.e("chunk-1304931a").then(n.bind(null,"9cda"))}}]}]},{path:"/login",component:function(){return n.e("chunk-29b6a6ac").then(n.bind(null,"a55b"))}},{path:"*",redirect:"/index"}],V=new d["a"]({routes:P});V.beforeEach((function(t,e,n){n()}));var B,K=V,U=n("ce3c"),z=n("9f3a");a["default"].use(z["a"]);var G={SET_LOCATION:"SET_LOCATION",SET_ADDRESS:" SET_ADDRESS",ORDER_INFO:"ORDER_INFO",USER_INFO:"USER_INFO",REMARK_INFO:"REMARK_INFO"},q={location:{},address:"",orderInfo:null,userInfo:null,remarkInfo:{tabware:"",remark:""}},H={location:function(t){return t.location},address:function(t){return t.address},orderInfo:function(t){return t.orderInfo},userInfo:function(t){return t.userInfo},remarkInfo:function(t){return t.remarkInfo},totalcount:function(t){var e=0;if(t.orderInfo){var n=t.orderInfo.selectFoods;n.forEach((function(t){e+=t.activity.fixed_price*t.count})),e+=t.orderInfo.shopInfo.float_delivery_fee}return e}},J=(B={},Object(U["a"])(B,G.SET_LOCATION,(function(t,e){t.location=e||null})),Object(U["a"])(B,G.SET_ADDRESS,(function(t,e){location?t.address=e:t.address=null})),Object(U["a"])(B,G.ORDER_INFO,(function(t,e){t.orderInfo=e||null})),Object(U["a"])(B,G.USER_INFO,(function(t,e){t.userInfo=e||null})),Object(U["a"])(B,G.REMARK_INFO,(function(t,e){t.remarkInfo=e||null})),B),W={setLocation:function(t,e){var n=t.commit;n(G.SET_LOCATION,e)},setAddress:function(t,e){var n=t.commit;n(G.SET_ADDRESS,e)},setOrderInfo:function(t,e){var n=t.commit;n(G.ORDER_INFO,e)},setUserInfo:function(t,e){var n=t.commit;n(G.USER_INFO,e)},setRemarkInfo:function(t,e){var n=t.commit;n(G.REMARK_INFO,e)}},Q=new z["a"].Store({types:G,state:q,getters:H,mutations:J,actions:W,modules:{}}),X=n("5976"),Y=n.n(X),Z=(n("4f89"),n("1cfa")),tt=n.n(Z);a["default"].prototype.$axios=Y.a,Y.a.defaults.baseURL="https://eleme3-peak-04176.herokuapp.com",a["default"].config.productionTip=!1,a["default"].use(C.a),Y.a.interceptors.request.use((function(t){return"post"==t.method&&(t.data=tt.a.stringify(t.data)),y["Indicator"].open({text:"加载中...",spinnerType:"fading-circle"}),t}),(function(t){return Promise.reject(t)})),Y.a.interceptors.response.use((function(t){return y["Indicator"].close(),t}),(function(t){return Promise.reject(t)})),new a["default"]({router:K,store:Q,render:function(t){return t(l)}}).$mount("#app")},"68cd":function(t,e,n){"use strict";var a=n("1f7a"),r=n.n(a);r.a},"813f":function(t,e,n){},8589:function(t,e,n){},"9e5c":function(t,e,n){},b2bf:function(t,e,n){},b8ba:function(t,e,n){},c8de:function(t,e,n){"use strict";var a=n("b8ba"),r=n.n(a);r.a},f332:function(t,e,n){"use strict";var a=n("b2bf"),r=n.n(a);r.a},f985:function(t,e,n){"use strict";var a=n("813f"),r=n.n(a);r.a}});
//# sourceMappingURL=app.86f63c56.js.map